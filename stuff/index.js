(function(c,m,p,l,u,a,y,w){"use strict";const{ScrollView:v}=u.General,{FormSection:g,FormRadioRow:_,FormSwitchRow:b,FormIcon:S}=u.Forms;function F(){return y.useProxy(a.storage),React.createElement(v,null,React.createElement(g,{title:"Misc Settings",titleStyleType:"no_border"}),React.createElement(b,{label:"NSFW Warning",subLabel:"Warn when sending an NSFW image in a non NSFW channel.",leading:React.createElement(S,{source:w.getAssetIDByName("ic_warning_24px")}),value:a.storage.nsfwwarn,onValueChange:function(n){return a.storage.nsfwwarn=n}}),React.createElement(g,{title:"Defalt Sort",titleStyleType:"no_border"},Object.entries({Best:"best",Hot:"hot",New:"new",Rising:"rising",Top:"top",Controversial:"controversial"}).map(function(n){let[e,s]=n;return React.createElement(_,{label:e,selected:a.storage.sortdefs===s,onPress:function(){a.storage.sortdefs=s}})})))}const h=l.findByProps("sendMessage","receiveMessage"),R=l.findByProps("getLastSelectedChannelId"),A=l.findByProps("createBotMessage"),$=l.findByProps("BOT_AVATARS");function d(n,e,s){const r=n??R?.getChannelId?.(),i=A.createBotMessage({channelId:r,content:"",embeds:s});i.author.username="Homie",i.author.avatar="SUSV",$.BOT_AVATARS.SUSV="https://pbs.twimg.com/media/Eys2THcXMAYPius.jpg",typeof e=="string"?i.content=e:Object.assign(i,e),h.receiveMessage(r,i)}let f=[];f.push(m.registerCommand({name:"hentai",displayName:"hentai",description:"Get a hentai content",displayDescription:"Get a hentai content",options:[{name:"sort",displayName:"sort",description:"Changes the way reddit sorts.",displayDescription:"Changes the way reddit sorts",required:!1,type:3},{name:"silent",displayName:"silent",description:"Makes it so only you can see the message.",displayDescription:"Makes it so only you can see the message.",required:!1,type:5}],applicationId:"-1",inputType:1,type:1,execute:async function(n,e){try{let s=n.find(function(o){return o.name==="nsfw"})?.value,r=n.find(function(o){return o.name==="sort"})?.value,i=n.find(function(o){return o.name==="silent"})?.value;if(typeof r>"u"&&(r=a.storage.sortdefs),!["best","hot","new","rising","top","controversial"].includes(r)){d(e.channel.id,"Incorrect sorting type. Valid options are\n`best`, `hot`, `new`, `rising`, `top`, `controversial`.",[]);return}let t=await fetch(`https://www.reddit.com/r/hentai/${r}.json?limit=100`).then(function(o){return o.json()});if(!e.channel.nsfw_&&s&&a.storage.nsfwwarn&&!(i??!0)){d(e.channel.id,`This channel is not marked as NSFW
(You can disable this check in plugin settings)`,[]);return}i??!0?d(e.channel.id,"",[{type:"rich",title:t?.title,url:`https://reddit.com${t?.permalink}`,author:{name:`u/${t?.author} \u2022 r/${t?.subreddit}`,proxy_icon_url:author?.data.icon_img.split("?")[0],icon_url:author?.data.icon_img.split("?")[0]},image:{proxy_url:t?.url_overridden_by_dest.replace(/.gifv$/g,".gif")??t?.url.replace(/.gifv$/g,".gif"),url:t?.url_overridden_by_dest?.replace(/.gifv$/g,".gif")??t?.url?.replace(/.gifv$/g,".gif"),width:t?.preview?.images?.[0]?.source?.width,height:t?.preview?.images?.[0]?.source?.height},color:"0xf4b8e4"}]):h.sendMessage(e.channel.id,{content:t?.url_overridden_by_dest??t?.url})}catch(s){p.logger.log(s),d(e.channel.id,"ERROR !!!!!!!!!!!! \u{1F62D}\u{1F62D}\u{1F62D} Check debug logs!! \u{1F97A}\u{1F97A}\u{1F97A}",[])}}}));const B=F,M=function(){a.storage.nsfwwarn??=!0,a.storage.sortdefs??="new"},T=function(){for(const n of f)n()};return c.onLoad=M,c.onUnload=T,c.settings=B,c})({},vendetta.commands,vendetta,vendetta.metro,vendetta.ui.components,vendetta.plugin,vendetta.storage,vendetta.ui.assets);
