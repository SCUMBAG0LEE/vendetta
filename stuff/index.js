(function(i,p,m,o,d,a,f,y){"use strict";const{ScrollView:w}=d.General,{FormSection:u,FormRadioRow:v,FormSwitchRow:_,FormIcon:b}=d.Forms;function S(){return f.useProxy(a.storage),React.createElement(w,null,React.createElement(u,{title:"Misc Settings",titleStyleType:"no_border"}),React.createElement(_,{label:"NSFW Warning",subLabel:"Warn when sending an NSFW image in a non NSFW channel.",leading:React.createElement(b,{source:y.getAssetIDByName("ic_warning_24px")}),value:a.storage.nsfwwarn,onValueChange:function(n){return a.storage.nsfwwarn=n}}),React.createElement(u,{title:"Defalt Sort",titleStyleType:"no_border"},Object.entries({Best:"best",Hot:"hot",New:"new",Rising:"rising",Top:"top",Controversial:"controversial"}).map(function(n){let[r,t]=n;return React.createElement(v,{label:r,selected:a.storage.sortdefs===t,onPress:function(){a.storage.sortdefs=t}})})))}const g=o.findByProps("sendMessage","receiveMessage"),R=o.findByProps("getLastSelectedChannelId"),$=o.findByProps("createBotMessage"),B=o.findByProps("BOT_AVATARS");function l(n,r,t){const c=n??R?.getChannelId?.(),e=$.createBotMessage({channelId:c,content:"",embeds:t});e.author.username="Homie",e.author.avatar="SUSV",B.BOT_AVATARS.SUSV="https://pbs.twimg.com/media/Eys2THcXMAYPius.jpg",typeof r=="string"?e.content=r:Object.assign(e,r),g.receiveMessage(c,e)}let h=[];h.push(p.registerCommand({name:"hentai",displayName:"hentai",description:"Get a hentai content",displayDescription:"Get a hentai content",options:[{name:"sort",displayName:"sort",description:"Changes the way reddit sorts.",displayDescription:"Changes the way reddit sorts",required:!1,type:3},{name:"silent",displayName:"silent",description:"Makes it so only you can see the message.",displayDescription:"Makes it so only you can see the message.",required:!1,type:5}],applicationId:"-1",inputType:1,type:1,execute:async function(n,r){try{let t=n.find(function(s){return s.name==="sort"})?.value,c=n.find(function(s){return s.name==="silent"})?.value;if(typeof t>"u"&&(t=a.storage.sortdefs),!["best","hot","new","rising","top","controversial"].includes(t)){l(r.channel.id,"Incorrect sorting type. Valid options are\n`best`, `hot`, `new`, `rising`, `top`, `controversial`.",[]);return}let e=await fetch(`https://www.reddit.com/r/hentai/${t}.json?limit=100`).then(function(s){return s.json()});c??!0?l(r.channel.id,"",[{type:"rich",title:e?.title,url:`https://reddit.com${e?.permalink}`,author:{name:`u/${e?.author} \u2022 r/${e?.subreddit}`,proxy_icon_url:author?.data.icon_img.split("?")[0],icon_url:author?.data.icon_img.split("?")[0]},image:{proxy_url:e?.url_overridden_by_dest.replace(/.gifv$/g,".gif")??e?.url.replace(/.gifv$/g,".gif"),url:e?.url_overridden_by_dest?.replace(/.gifv$/g,".gif")??e?.url?.replace(/.gifv$/g,".gif"),width:e?.preview?.images?.[0]?.source?.width,height:e?.preview?.images?.[0]?.source?.height},color:"0xf4b8e4"}]):g.sendMessage(r.channel.id,{content:e?.url_overridden_by_dest??e?.url})}catch(t){m.logger.log(t),l(r.channel.id,"ERROR",[])}}}));const M=S,T=function(){a.storage.nsfwwarn??=!0,a.storage.sortdefs??="new"},A=function(){for(const n of h)n()};return i.onLoad=T,i.onUnload=A,i.settings=M,i})({},vendetta.commands,vendetta,vendetta.metro,vendetta.ui.components,vendetta.plugin,vendetta.storage,vendetta.ui.assets);
